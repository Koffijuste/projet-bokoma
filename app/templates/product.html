{% extends "base.html" %}

{% block title %}{{ product.name }} – BOKOMA-STOR{% endblock %}

{% block content %}
<div class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-md-6 mb-4 mb-md-0" data-aos="zoom-in">
                <img src="{{ product.image_url or 'https://via.placeholder.com/500x500/8B4513/FFFFFF?text=' + (product.name | urlencode) }}" 
                    class="img-fluid rounded shadow" alt="{{ product.name }}" onerror="this.src='https://via.placeholder.com/500x500/8B4513/FFFFFF?text=Image+non+disponible'">
            </div>
            <div class="col-md-6" data-aos="fade-left">
                <h2>{{ product.name }}</h2>
                <p class="text-muted">{{ product.category }} • Matériau : {{ product.material or "Artisanal" }}</p>
                <h3 class="text-primary">{{ "%.2f"|format(product.price) }} FCFA</h3>
                <p>{{ product.description }}</p>

                {% if product.in_stock %}
                    <!-- Formulaire d'ajout au panier -->
                    <form method="POST" action="{{ url_for('main.add_to_cart', product_id=product.id) }}">
                        <div class="mb-3">
                            <label class="form-label">Pointure</label>
                            <select name="size" class="form-select" required>
                                <option value="">Choisir votre pointure</option>
                                {% for sz in ['36', '37', '38', '39', '40', '41', '42', '43', '44', '45', '46'] %}
                                <option value="{{ sz }}">{{ sz }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Couleur</label>
                            <select name="color" class="form-select" required>
                                <option value="">Choisir une couleur</option>
                                <option value="Noir">Noir</option>
                                <option value="Marron">Marron</option>
                                <option value="Blanc">Blanc</option>
                                <option value="Rouge">Rouge</option>
                                <option value="Bleu">Bleu</option>
                                <option value="Gris">Gris</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary mt-2">Ajouter au panier</button>
                    </form>
                {% else %}
                    <span class="badge bg-danger">Rupture de stock</span>
                {% endif %}

                <div class="mt-4">
                    <h5>Caractéristiques</h5>
                    <ul class="list-unstyled">
                        <li><i class="bi bi-check-circle text-success me-2"></i> Fabriqué à la main en COTE D'IVOIRE</li>
                        <li><i class="bi bi-check-circle text-success me-2"></i> Cuir ou matériaux naturels</li>
                        <li><i class="bi bi-check-circle text-success me-2"></i> Livraison disponible en COTE D'IVOIRE et à l’international</li>
                    </ul>
                </div>
            </div>
        </div>

        <a href="{{ url_for('main.shop') }}" class="btn btn-link mt-4">&larr; Retour à la boutique</a>
    </div>
</div>
{% endblock %}